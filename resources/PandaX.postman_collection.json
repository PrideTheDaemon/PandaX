{
	"info": {
		"_postman_id": "c297e326-0dff-40b0-a3ff-4f5875bec81e",
		"name": "PandaX",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Security",
			"item": [
				{
					"name": "Auth – Obtain token",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5104795f-8a74-4f82-a0ec-694b7fdac511",
								"exec": [
									"pm.test(\"Can log and request token\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Token is valid\", function () {",
									"    pm.response.stream.toString().split(\".\").length",
									"});",
									"",
									"if(pm.response.code == 200) {",
									"    pm.collectionVariables.set(\"token\", pm.response.stream.toString());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "login",
									"value": "{{login}}",
									"type": "text"
								},
								{
									"key": "password",
									"value": "{{password}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/token",
							"host": [
								"{{url}}"
							],
							"path": [
								"token"
							]
						}
					},
					"response": []
				},
				{
					"name": "Auth – Verify token",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "d1c32a53-56b2-4780-bb0d-9e6f54585357",
								"exec": [
									"pm.test(\"Answer is Pong !\", function () {",
									"    pm.expect(pm.response.stream.toString()).to.equal(\"Pong !\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}",
							"host": [
								"{{url}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "MediaType",
			"item": [
				{
					"name": "MediaType – Create one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "53003437-0327-4870-87f3-bb4f86c4443e",
								"exec": [
									"let mediaTypeTest = '{'",
									"+ '\"label\":\"Test media type\"'",
									"+'}'",
									"",
									"pm.collectionVariables.set(\"mediaTypeTest\", mediaTypeTest);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "51039724-1d5b-4e47-b310-2f0335362f88",
								"exec": [
									"pm.test(\"Can create media type\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Returned a path\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/mediatype/\");",
									"});",
									"",
									"pm.test(\"Return path is well formed\", function () {",
									"    pm.expect(pm.response.stream.toString().split(\"/\").length).to.equal(6);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastMediaTypeId\", pm.response.stream.toString().split(\"/\")[5]);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "mediatype",
									"value": "{{mediaTypeTest}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/mediatype",
							"host": [
								"{{url}}"
							],
							"path": [
								"mediatype"
							]
						}
					},
					"response": []
				},
				{
					"name": "MediaType – Get one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a media type\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastMediaType\", pm.response.stream.toString());"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/mediatype/{{lastMediaTypeId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"mediatype",
								"{{lastMediaTypeId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "MediaType – Delete one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0e3ec86-bbb8-4844-881e-62bc23fb7590",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Body matches string\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/mediatype\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/x-www-form-urlencoded"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/mediatype/{{lastMediaTypeId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"mediatype",
								"{{lastMediaTypeId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "MediaType – Get all",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Request succeeds\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}/mediatype",
							"host": [
								"{{url}}"
							],
							"path": [
								"mediatype"
							]
						}
					},
					"response": []
				},
				{
					"name": "MediaType - Modify one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "fc972e87-8a4e-451d-a682-5c919c9af326",
								"exec": [
									"let newMediaType = JSON.parse(pm.collectionVariables.get(\"lastMediaType\"));",
									"",
									"newMediaType.label = 'updated type'",
									"",
									"pm.collectionVariables.set(\"lastMediaType\",JSON.stringify(newMediaType));",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "mediatype",
									"value": "{{lastMediaType}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/mediatype",
							"host": [
								"{{url}}"
							],
							"path": [
								"mediatype"
							]
						}
					},
					"response": []
				},
				{
					"name": "MediaType – Get all media",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a comment\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastComment\", pm.response.stream.toString());"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/mediatype/{{lastMediaTypeId}}/media",
							"host": [
								"{{url}}"
							],
							"path": [
								"mediatype",
								"{{lastMediaTypeId}}",
								"media"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Publisher",
			"item": [
				{
					"name": "Publisher – Create one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "53003437-0327-4870-87f3-bb4f86c4443e",
								"exec": [
									"let publisher = '{'",
									"+'\"denomination\":\"Test publisher\"'",
									"+'}'",
									"",
									"pm.collectionVariables.set(\"publisherTest\", publisher);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "51039724-1d5b-4e47-b310-2f0335362f88",
								"exec": [
									"pm.test(\"Can create media type\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Returned a path\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/publisher/\");",
									"});",
									"",
									"pm.test(\"Return path is well formed\", function () {",
									"    pm.expect(pm.response.stream.toString().split(\"/\").length).to.equal(6);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastPublisherId\", pm.response.stream.toString().split(\"/\")[5]);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "publisher",
									"value": "{{publisherTest}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/publisher",
							"host": [
								"{{url}}"
							],
							"path": [
								"publisher"
							]
						}
					},
					"response": []
				},
				{
					"name": "Publisher – Get one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a media type\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastPublisher\", pm.response.stream.toString());"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/publisher/{{lastPublisherId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"publisher",
								"{{lastPublisherId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Publisher – Delete one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0e3ec86-bbb8-4844-881e-62bc23fb7590",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Body matches string\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/publisher\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/x-www-form-urlencoded"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/publisher/{{lastPublisherId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"publisher",
								"{{lastPublisherId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Publisher – Get all",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Request succeeds\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/publisher",
							"host": [
								"{{url}}"
							],
							"path": [
								"publisher"
							]
						}
					},
					"response": []
				},
				{
					"name": "Publisher - Modify One",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "7bca421e-020e-4e25-95c8-f9975e9b9372",
								"exec": [
									"let newPublisher = JSON.parse(pm.collectionVariables.get(\"lastPublisher\"));",
									"",
									"newPublisher.denomination = 'updated publisher'",
									"",
									"pm.collectionVariables.set(\"lastPublisher\",JSON.stringify(newPublisher));"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "publisher",
									"value": "{{lastPublisher}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/publisher",
							"host": [
								"{{url}}"
							],
							"path": [
								"publisher"
							]
						}
					},
					"response": []
				},
				{
					"name": "Publisher – Get all media",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a comment\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastComment\", pm.response.stream.toString());"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/publisher/{{lastPublisherId}}/media",
							"host": [
								"{{url}}"
							],
							"path": [
								"publisher",
								"{{lastPublisherId}}",
								"media"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "User",
			"item": [
				{
					"name": "User – Create one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "53003437-0327-4870-87f3-bb4f86c4443e",
								"exec": [
									"let user = '{'",
									"+'\"pseudo\":\"user test\",'",
									"+'\"pwd\":\"test\",'",
									"+'\"firstName\":\"test\",'",
									"+'\"lastName\":\"test\",'",
									"+'\"isAdmin\":\"1\"'",
									"+'}'",
									"",
									"pm.collectionVariables.set(\"userTest\", user);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "51039724-1d5b-4e47-b310-2f0335362f88",
								"exec": [
									"pm.test(\"Can create user\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Returned a path\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/user/\");",
									"});",
									"",
									"pm.test(\"Return path is well formed\", function () {",
									"    pm.expect(pm.response.stream.toString().split(\"/\").length).to.equal(6);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastUserId\", pm.response.stream.toString().split(\"/\")[5]);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "user",
									"value": "{{userTest}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/user",
							"host": [
								"{{url}}"
							],
							"path": [
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "User – Get one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a user\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastUser\", pm.response.stream.toString());"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/user/{{lastUserId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"user",
								"{{lastUserId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "User – Delete one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0e3ec86-bbb8-4844-881e-62bc23fb7590",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Body matches string\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/user\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/x-www-form-urlencoded"
							},
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/user/{{lastUserId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"user",
								"{{lastUserId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "User – Get all",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Request succeeds\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/user",
							"host": [
								"{{url}}"
							],
							"path": [
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "User - Modify One",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "10489106-0d67-4edf-ac56-46428e5e9495",
								"exec": [
									"let newUser = JSON.parse(pm.collectionVariables.get(\"lastUser\"));",
									"",
									"newUser.pseudo = 'updated pseudo'",
									"",
									"pm.collectionVariables.set(\"lastUser\", JSON.stringify(newUser));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "5ba2c2ba-4c2b-452e-87fe-826abed1d058",
								"exec": [
									"pm.test(\"Can request a user\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "user",
									"value": "{{lastUser}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/user",
							"host": [
								"{{url}}"
							],
							"path": [
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "User - Get all Possessions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5042d08e-4e39-4872-9457-33a5ba4442dc",
								"exec": [
									"pm.test(\"Can request a user\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": []
						},
						"url": {
							"raw": "{{url}}/user/{{lastUserId}}/media",
							"host": [
								"{{url}}"
							],
							"path": [
								"user",
								"{{lastUserId}}",
								"media"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Medias",
			"item": [
				{
					"name": "Media – Create one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "3cbd8481-61b2-4dca-8ccc-741bea743993",
								"exec": [
									"let media = '{'",
									"    + '\"title\" : \"Kung Fu Panda\",'",
									"    + '\"published\" : \"2019-11-11\",'",
									"    + '\"city\" : \"KungFuLand\",'",
									"    + '\"descript\" : \"In the Valley of Peace, a land in ancient China inhabited by anthropomorphic animals, Po Ping the giant panda is a kung fu fanatic who idolizes the Furious Five – Tigress, Monkey, Mantis, Viper, and Crane – a quintet of kung fu masters trained by Master Shifu, the red panda. However, Po is unable to pursue his dream of learning kung fu as he helps his adoptive father, Mr. Ping the goose, in his noodle restaurant.\",'",
									"    + '\"imageUrl\" : \"http://fr.web.img5.acsta.net/c_215_290/medias/nmedia/18/36/20/29/18944269.jpg\",'",
									"    + '\"user\" : ' + pm.collectionVariables.get(\"lastUser\") + ','",
									"    + '\"publisher\" :' + pm.collectionVariables.get(\"lastPublisher\") + ','",
									"    + '\"mediaType\" : ' + pm.collectionVariables.get(\"lastMediaType\")",
									"    + '}'",
									"",
									"pm.collectionVariables.set(\"mediaTest\", media);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "382afe47-2d71-42a8-bf12-c9ddb04027d8",
								"exec": [
									"pm.test(\"Can create media\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Returned a path\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/media/\");",
									"});",
									"",
									"pm.test(\"Return path is well formed\", function () {",
									"    pm.expect(pm.response.stream.toString().split(\"/\").length).to.equal(6);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastMediaId\", pm.response.stream.toString().split(\"/\")[5]);",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "media",
									"value": "{{mediaTest}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/media",
							"host": [
								"{{url}}"
							],
							"path": [
								"media"
							]
						},
						"description": "In order for this request to work, the POST and GET from MediaType, Publisher and User must be launched before"
					},
					"response": []
				},
				{
					"name": "Media – Get one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can get a media\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"pm.collectionVariables.set(\"lastMedia\", pm.response.stream.toString());",
									"",
									"pm.collectionVariables.set(\"lastMediaCity\",JSON.parse(pm.collectionVariables.get(\"lastMedia\")).city);",
									"",
									"pm.collectionVariables.set(\"lastMediaTitle\",JSON.parse(pm.collectionVariables.get(\"lastMedia\")).title);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/media/{{lastMediaId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"media",
								"{{lastMediaId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Media – Delete one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a0e3ec86-bbb8-4844-881e-62bc23fb7590",
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Body matches string\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/media\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							},
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}/media/{{lastMediaId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"media",
								"{{lastMediaId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Media – Get all",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Request succeeds\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}/media",
							"host": [
								"{{url}}"
							],
							"path": [
								"media"
							]
						}
					},
					"response": []
				},
				{
					"name": "Media - Modify one",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "17059c4d-b2cf-4ed8-8b53-4ed573186613",
								"exec": [
									"let newMedia = JSON.parse(pm.collectionVariables.get(\"lastMedia\"));",
									"",
									"newMedia.title = 'Kung Fu Panda 2 updated';",
									"newMedia.descript = 'Lord Shen, the scion of a peacock clan that rules Gongmen City in ancient China, seeks to weaponize his family s recently invented fireworks. After discovering from the court s goat soothsayer that a warrior of black-and-white will defeat him if he does not change his ways, Shen leads an army of wolves to exterminate the panda population to avert the prophecy. Shen s parents are horrified by this atrocity and exile him as punishment.';",
									"",
									"pm.collectionVariables.set(\"lastMedia\", JSON.stringify(newMedia));",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "media",
									"value": "{{lastMedia}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/media",
							"host": [
								"{{url}}"
							],
							"path": [
								"media"
							]
						}
					},
					"response": []
				},
				{
					"name": "Media - Get by city",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "{{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{url}}/media/?city={{lastMediaCity}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"media",
								""
							],
							"query": [
								{
									"key": "city",
									"value": "{{lastMediaCity}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Media - Get by title",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/media/?title={{lastMediaTitle}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"media",
								""
							],
							"query": [
								{
									"key": "title",
									"value": "{{lastMediaTitle}}"
								}
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Comment",
			"item": [
				{
					"name": "Comment – Create one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a comment\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Returned a path\", function () {",
									"    pm.expect(pm.response.text()).to.include(\"/comment/\");",
									"});",
									"",
									"pm.test(\"Return path is well formed\", function () {",
									"    pm.expect(pm.response.stream.toString().split(\"/\").length).to.equal(10);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastCommentId\", pm.response.stream.toString().split(\"/\")[5]);"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "5b79c7a7-c1e5-4f69-8670-48b50b5f1a0f",
								"exec": [
									"let commentTest = '{'\r",
									"    +'    \"content\": \"test\",'\r",
									"    +'    \"media\": ' + pm.collectionVariables.get(\"lastMedia\") + ','\r",
									"    +'    \"user\": ' + pm.collectionVariables.get(\"lastUser\")\r",
									"    +'}';\r",
									"    \r",
									"pm.collectionVariables.set(\"commentTest\", commentTest);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							},
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/x-www-form-urlencoded",
								"type": "text"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "comment",
									"value": "{{commentTest}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{url}}/comment",
							"host": [
								"{{url}}"
							],
							"path": [
								"comment"
							]
						}
					},
					"response": []
				},
				{
					"name": "Comment – Get one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a comment\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastComment\", pm.response.stream.toString());"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/comment/{{lastCommentId}}/media/{{lastMediaId}}/user/{{lastUserId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"comment",
								"{{lastCommentId}}",
								"media",
								"{{lastMediaId}}",
								"user",
								"{{lastUserId}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Comment – Get all for user and media",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request all coments for a user and media\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/media/{{lastMediaId}}/user/{{lastUserId}}/comment",
							"host": [
								"{{url}}"
							],
							"path": [
								"media",
								"{{lastMediaId}}",
								"user",
								"{{lastUserId}}",
								"comment"
							]
						}
					},
					"response": []
				},
				{
					"name": "Comment – Get all",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request all comments\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/comment",
							"host": [
								"{{url}}"
							],
							"path": [
								"comment"
							]
						}
					},
					"response": []
				},
				{
					"name": "Comment – Delete one",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f8aff33e-e53f-45c3-922e-0c3c3d10d55f",
								"exec": [
									"pm.test(\"Can request a media type\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.collectionVariables.set(\"lastMediaType\", pm.response.stream.toString());"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"type": "text",
								"value": "{{token}}"
							}
						],
						"url": {
							"raw": "{{url}}/comment/{{lastCommentId}}/media/{{lastMediaId}}/user/{{lastUserId}}",
							"host": [
								"{{url}}"
							],
							"path": [
								"comment",
								"{{lastCommentId}}",
								"media",
								"{{lastMediaId}}",
								"user",
								"{{lastUserId}}"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "17e81533-a19e-43c1-a507-33b48d0a62b9",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "d7dcb7b2-ff4d-4c5c-96e9-db39e96f3c4c",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "fa79c92f-4af9-4307-aa2d-600cfca38ae5",
			"key": "url",
			"value": "localhost:8080/PandaX",
			"type": "string"
		},
		{
			"id": "b1f24144-b496-441d-9af1-2484d0892d0e",
			"key": "token",
			"value": "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI1IiwiZXhwIjoxNTc1MzMyMTY2LCJpYXQiOjE1NzQ5MDAxNjYsImlzcyI6IlBhbmRhWCBSRVNUIEFQSSIsInJvbCI6IkFETUlOIiwibmFtIjoicGFuZGEifQ.qnb17IQr-8axU_V9XFUS1rCWif6c3K4joHmgzXOv3qozLar4uM2l_AQ4d-B3hG_Hf19fcIqhZgKz4NZFIxwyPg",
			"type": "string"
		},
		{
			"id": "4a5c63d8-3cd2-441d-9f9b-af8a6144a1c0",
			"key": "login",
			"value": "panda",
			"type": "string"
		},
		{
			"id": "0278c36c-5960-4e7b-873c-301d52ea8c10",
			"key": "password",
			"value": "panda",
			"type": "string"
		},
		{
			"id": "cfcb8cbb-4c57-431c-bfb4-d264b15e4aee",
			"key": "mediaTypeTest",
			"value": "{\"label\":\"Test media type\"}",
			"type": "string"
		},
		{
			"id": "79a81826-8852-44da-9a9e-62feb4b112c2",
			"key": "lastMediaTypeId",
			"value": "19",
			"type": "string"
		},
		{
			"id": "2dca99a2-a54f-4634-9353-60f6ce8daf78",
			"key": "lastMediaType",
			"value": "http://localhost:8080/PandaX/comment",
			"type": "string"
		},
		{
			"id": "c47c9540-670c-4467-94e5-d99ec4955c96",
			"key": "publisherTest",
			"value": "{\"denomination\":\"Test publisher\"}",
			"type": "string"
		},
		{
			"id": "4e2afb58-c82e-47f2-86df-f70195935c5e",
			"key": "lastPublisherId",
			"value": "13",
			"type": "string"
		},
		{
			"id": "33c5d277-429d-4549-9061-a06720d8f9f2",
			"key": "lastPublisher",
			"value": "{\"denomination\":\"updated publisher\",\"id\":13}",
			"type": "string"
		},
		{
			"id": "d9fb7bed-8ec0-4428-af5b-a4fd9d7b817b",
			"key": "userTest",
			"value": "{\"pseudo\":\"user test\",\"pwd\":\"test\",\"firstName\":\"test\",\"lastName\":\"test\",\"isAdmin\":\"1\"}",
			"type": "string"
		},
		{
			"id": "915b3aa6-4e33-484d-bc65-1a7359535321",
			"key": "lastUserId",
			"value": "6",
			"type": "string"
		},
		{
			"id": "c13e76ba-a762-4e3a-a21d-50d6ce8cdbe3",
			"key": "lastUser",
			"value": "{\"admin\":false,\"firstName\":\"test\",\"id\":6,\"lastName\":\"test\",\"pseudo\":\"updated pseudo\",\"pwd\":\"test\"}",
			"type": "string"
		},
		{
			"id": "40291d83-17af-457f-bc55-2f10b70f35c8",
			"key": "mediaTest",
			"value": "{\"title\" : \"Kung Fu Panda\",\"published\" : \"2019-11-11\",\"city\" : \"KungFuLand\",\"descript\" : \"In the Valley of Peace, a land in ancient China inhabited by anthropomorphic animals, Po Ping the giant panda is a kung fu fanatic who idolizes the Furious Five – Tigress, Monkey, Mantis, Viper, and Crane – a quintet of kung fu masters trained by Master Shifu, the red panda. However, Po is unable to pursue his dream of learning kung fu as he helps his adoptive father, Mr. Ping the goose, in his noodle restaurant.\",\"imageUrl\" : \"http://fr.web.img5.acsta.net/c_215_290/medias/nmedia/18/36/20/29/18944269.jpg\",\"user\" : {\"admin\":false,\"firstName\":\"test\",\"id\":6,\"lastName\":\"test\",\"pseudo\":\"user test\",\"pwd\":\"test\"},\"publisher\" :{\"denomination\":\"Test publisher\",\"id\":13},\"mediaType\" : {\"id\":19,\"label\":\"Test media type\"}}",
			"type": "string"
		},
		{
			"id": "9e15be36-d7cf-4aae-af53-578f94fe0f8a",
			"key": "lastMediaId",
			"value": "1",
			"type": "string"
		},
		{
			"id": "246d7282-c21c-436a-a43a-cdfde8f657a5",
			"key": "lastMedia",
			"value": "{\"city\":\"KungFuLand\",\"descript\":\"Lord Shen, the scion of a peacock clan that rules Gongmen City in ancient China, seeks to weaponize his family s recently invented fireworks. After discovering from the court s goat soothsayer that a warrior of black-and-white will defeat him if he does not change his ways, Shen leads an army of wolves to exterminate the panda population to avert the prophecy. Shen s parents are horrified by this atrocity and exile him as punishment.\",\"id\":1,\"imageUrl\":\"http://fr.web.img5.acsta.net/c_215_290/medias/nmedia/18/36/20/29/18944269.jpg\",\"mediaType\":{\"id\":19,\"label\":\"Test media type\"},\"published\":\"2019-11-11T00:00:00+01:00\",\"publisher\":{\"denomination\":\"Test publisher\",\"id\":13},\"title\":\"Kung Fu Panda 2 updated\",\"user\":{\"admin\":false,\"firstName\":\"test\",\"id\":6,\"lastName\":\"test\",\"pseudo\":\"user test\",\"pwd\":\"test\"}}",
			"type": "string"
		},
		{
			"id": "a325569e-ecf3-40f1-b334-618c3855e64d",
			"key": "lastMediaCity",
			"value": "KungFuLand",
			"type": "string"
		},
		{
			"id": "f88a8e85-75cf-4023-a378-bed5e60907cc",
			"key": "lastMediaTitle",
			"value": "Kung Fu Panda",
			"type": "string"
		},
		{
			"id": "9266e2fe-cddb-4093-b4da-15dd87fc56de",
			"key": "commentTest",
			"value": "{    \"content\": \"test\",    \"media\": {\"city\":\"KungFuLand\",\"descript\":\"In the Valley of Peace, a land in ancient China inhabited by anthropomorphic animals, Po Ping the giant panda is a kung fu fanatic who idolizes the Furious Five – Tigress, Monkey, Mantis, Viper, and Crane – a quintet of kung fu masters trained by Master Shifu, the red panda. However, Po is unable to pursue his dream of learning kung fu as he helps his adoptive father, Mr. Ping the goose, in his noodle restaurant.\",\"id\":1,\"imageUrl\":\"http://fr.web.img5.acsta.net/c_215_290/medias/nmedia/18/36/20/29/18944269.jpg\",\"mediaType\":{\"id\":19,\"label\":\"Test media type\"},\"published\":\"2019-11-11T00:00:00+01:00\",\"publisher\":{\"denomination\":\"Test publisher\",\"id\":13},\"title\":\"Kung Fu Panda\",\"user\":{\"admin\":false,\"firstName\":\"test\",\"id\":6,\"lastName\":\"test\",\"pseudo\":\"user test\",\"pwd\":\"test\"}},    \"user\": {\"admin\":false,\"firstName\":\"test\",\"id\":6,\"lastName\":\"test\",\"pseudo\":\"user test\",\"pwd\":\"test\"}}",
			"type": "string"
		},
		{
			"id": "f1cf2d27-e2da-4e1d-bd8d-73aef65c7b75",
			"key": "lastCommentId",
			"value": "1",
			"type": "string"
		},
		{
			"id": "7d3d27da-a703-4b8e-99c7-216e3478685c",
			"key": "lastComment",
			"value": "[{\"city\":\"KungFuLand\",\"descript\":\"Lord Shen, the scion of a peacock clan that rules Gongmen City in ancient China, seeks to weaponize his family s recently invented fireworks. After discovering from the court s goat soothsayer that a warrior of black-and-white will defeat him if he does not change his ways, Shen leads an army of wolves to exterminate the panda population to avert the prophecy. Shen s parents are horrified by this atrocity and exile him as punishment.\",\"id\":1,\"imageUrl\":\"http://fr.web.img5.acsta.net/c_215_290/medias/nmedia/18/36/20/29/18944269.jpg\",\"mediaType\":{\"id\":19,\"label\":\"updated type\"},\"published\":\"2019-11-11T00:00:00+01:00\",\"publisher\":{\"denomination\":\"updated publisher\",\"id\":13},\"title\":\"Kung Fu Panda 2 updated\",\"user\":{\"admin\":false,\"firstName\":\"test\",\"id\":6,\"lastName\":\"test\",\"pseudo\":\"updated pseudo\",\"pwd\":\"test\"}}]",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}